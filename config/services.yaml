# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.

# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices.html#use-parameters-for-application-configuration
parameters:
    router.request_context.host: '%env(HTTP_HOST)%'
    router.request_context.scheme: '%env(HTTP_SCHEME)%'

services:

    # default configuration for services in *this* file
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        bind:
          #custom, not used yet.
          #FOS\ElasticaBundle\Finder\TransformedFinder $objectsFinder: '@fos_elastica.finder.objects.default'

    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/'
        exclude:
          - '../src/DependencyInjection/'
          - '../src/Entity/'
          - '../src/Kernel.php'
          - '../src/Tests/'

    # add more service definitions when explicit configuration is needed
    # please note that last definitions always *replace* previous ones
    #App\Service\ElasticsearchService:
    #  arguments: ['%fos_elastica.indexes.object.index_name%']

    App\Service\MailerManager:
        public: true
    EasyCorp\Bundle\EasyAdminBundle\Router\AdminUrlGenerator:
        public: true
    EasyCorp\Bundle\EasyAdminBundle\Contracts\Provider\AdminContextProviderInterface:
      alias: EasyCorp\Bundle\EasyAdminBundle\Provider\AdminContextProvider
      public: true
    EasyCorp\Bundle\EasyAdminBundle\Registry\DashboardControllerRegistryInterface:
      alias: EasyCorp\Bundle\EasyAdminBundle\Registry\DashboardControllerRegistry
      public: true
    EasyCorp\Bundle\EasyAdminBundle\Contracts\Router\AdminRouteGeneratorInterface:
      alias: EasyCorp\Bundle\EasyAdminBundle\Router\AdminRouteGenerator
      public: true
    App\DataFixtures\AdministratorsFixture:
      autowire: true
      arguments:
        $passwordEncoder: '@security.password_hasher'
      public: true
    security.user_password_hasher:
      class: Symfony\Component\PasswordHasher\Hasher\UserPasswordHasher
      public: true
    App\EventListener\ExceptionListener:
      tags:
        - { name: kernel.event_listener, event: kernel.exception }
    App\Security\AdminLoginFormAuthenticator:
      arguments:
        $userProvider: '@security.user.provider.concrete.admin_user_provider'
    App\Security\FrontLoginFormAuthenticator:
      arguments:
        $userProvider: '@security.user.provider.concrete.app_user_provider'
    Symfony\Component\DependencyInjection\ContainerInterface: '@service_container'
    #Psr\Container\ContainerInterface:
    #  autowire: true
    #Symfony\Component\Cache\Adapter\AdapterInterface:
    #  autowire: true
